(function(){"use strict";var t={2804:function(t,e,o){var n=o(9242),s=o(3396);const a={class:"container"};function r(t,e,o,n,r,i){const l=(0,s.up)("input-panel"),u=(0,s.up)("information-panel");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s.Wm)(l),(0,s.Wm)(u)])}var i=o(4870),l=o(7139);const u=["src"];function c(t,e,o,n,a,r){const i=(0,s.up)("data-window"),c=(0,s.up)("tab"),d=(0,s.up)("line-chart"),h=(0,s.up)("doughnut-chart"),p=(0,s.up)("tab-menu");return(0,s.wg)(),(0,s.iD)("div",{class:(0,l.C_)(["container",{collapsed:!this.groupInfo||!this.groupInfo.loaded}])},[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{title:"General"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{description:"Name"},{default:(0,s.w5)((()=>[(0,s._)("h1",null,(0,l.zw)(this.groupInfo.name),1)])),_:1}),(0,s.Wm)(i,{description:"Member Count"},{default:(0,s.w5)((()=>[(0,s._)("h1",null,(0,l.zw)(this.groupInfo.memberCount),1)])),_:1}),(0,s.Wm)(i,{description:"Group Photo"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:this.groupInfo.photo,alt:"Group Photo"},null,8,u)])),_:1})])),_:1}),(0,s.Wm)(c,{title:"Activity"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{description:"Post statistics (last 100)"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{chartData:{labels:r.getPostsLabels(),datasets:[{label:"Likes",data:r.groupInfo.posts.map((t=>t.likes)),borderColor:"#ffea2e"},{label:"Comments",data:r.groupInfo.posts.map((t=>t.comments)),borderColor:"#8640ff"},{label:"Reposts",data:r.groupInfo.posts.map((t=>t.reposts)),borderColor:"#ff4040"}]}},null,8,["chartData"])])),_:1})])),_:1}),(0,s.Wm)(c,{title:"Members"},{default:(0,s.w5)((()=>[r.groupInfo.memberSex?((0,s.wg)(),(0,s.j4)(i,{key:0,description:"Member sex"},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{chartData:{labels:["Other","Female","Male"],datasets:[{data:r.groupInfo.memberSex,backgroundColor:["#ff4133","#ff78b5","#42a4f5"]}]}},null,8,["chartData"])])),_:1})):(0,s.kq)("",!0),r.groupInfo.memberAge?((0,s.wg)(),(0,s.j4)(i,{key:1,description:"Member age"},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{chartData:{labels:r.getAgeGroupLabels(),datasets:[{data:r.groupInfo.memberAge,backgroundColor:r.getAgeGroupColors()}]}},null,8,["chartData"])])),_:1})):(0,s.kq)("",!0),r.groupInfo.memberEducation?((0,s.wg)(),(0,s.j4)(i,{key:2,description:"Member education"},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{chartData:{labels:["Not stated/Uneducated","School","University"],datasets:[{data:r.groupInfo.memberEducation,backgroundColor:["#ff4133","#ffac40","#89ff40"]}]}},null,8,["chartData"])])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1})],2)}const d=(t,e,o)=>{if(t){const n=t.split(/\./g)[2];if(n){const t=(new Date).getFullYear(),s=t-n;for(let n=0;n<o.length;n++)if(s<=o[n]){e[n+1]+=1;break}return}}e[0]+=1},h=(t,e)=>{const o=[0,0,0],n=[],s=[0,0,0];n.push(0);for(let a=0;a<e.length;a++)n.push(0);for(const a of t)o[a.sex]+=1,a.university?s[2]+=1:a.schools?s[1]+=1:s[0]+=1,d(a.bdate,n,e);return{memberSex:o,memberAge:n,memberEducation:s}};function p(t,e,o){o/=100;const n=e*Math.min(o,1-o)/100,s=e=>{const s=(e+t/30)%12,a=o-n*Math.max(Math.min(s-3,9-s,1),-1);return Math.round(255*a).toString(16).padStart(2,"0")};return`#${s(0)}${s(8)}${s(4)}`}const g={key:0,class:"tab"};function f(t,e,o,n,a,r){return o.title==a.selectedTitle?((0,s.wg)(),(0,s.iD)("div",g,[(0,s.WI)(t.$slots,"default",{},void 0,!0)])):(0,s.kq)("",!0)}var m={props:["title"],inject:["selectedTitle"],data(){return{selectedTitle:this.selectedTitle}}},b=o(89);const w=(0,b.Z)(m,[["render",f],["__scopeId","data-v-4ad964e7"]]);var v=w;const y={class:"tabs"},I={class:"tabs-header"},A=["onClick"],k={class:"tabs-slot"};function D(t,e,o,n,a,r){return(0,s.wg)(),(0,s.iD)("div",y,[(0,s._)("ul",I,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.tabTitles,(t=>((0,s.wg)(),(0,s.iD)("button",{key:t,onClick:e=>n.selectedTitle=t,class:(0,l.C_)({activeTab:n.selectedTitle==t})},(0,l.zw)(t),11,A)))),128))]),(0,s._)("div",k,[(0,s.WI)(t.$slots,"default",{},void 0,!0)])])}var C={setup(t,{slots:e}){const o=(0,i.iH)(e.default().map((t=>t.props.title))),n=(0,i.iH)(o.value[0]);return(0,s.JJ)("selectedTitle",n),{selectedTitle:n,tabTitles:o}}};const _=(0,b.Z)(C,[["render",D],["__scopeId","data-v-22f1e769"]]);var j=_;function W(t,e,o,n,a,r){const i=(0,s.up)("Doughnut");return(0,s.wg)(),(0,s.j4)(i,{"chart-options":o.chartOptions,"chart-data":o.chartData,"chart-id":o.chartId,"dataset-id-key":o.datasetIdKey,plugins:o.plugins,"css-classes":o.cssClasses,styles:o.styles,width:o.width,height:o.height},null,8,["chart-options","chart-data","chart-id","dataset-id-key","plugins","css-classes","styles","width","height"])}var x=o(6294),G=o(5140);G.kL.register(G.Dx,G.u,G.De,G.qi,G.uw,G.f$);var O={name:"DoughnutChart",components:{Doughnut:x.$I},props:{chartId:{type:String,default:"doughnut-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:300},height:{type:Number,default:300},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Object,default:()=>{}},chartData:{type:Object,default:()=>({labels:["A","B"],datasets:[{data:[1,1]}]})},chartOptions:{responsive:!0}}};const T=(0,b.Z)(O,[["render",W]]);var U=T;const K={class:"container"},Q={class:"description"};function M(t,e,o,n,a,r){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",K,[(0,s.WI)(t.$slots,"default",{},void 0,!0),(0,s._)("span",Q,(0,l.zw)(o.description),1)])])}var S={props:["description"]};const B=(0,b.Z)(S,[["render",M],["__scopeId","data-v-4a0ee6da"]]);var J=B;function H(t,e,o,n,a,r){const i=(0,s.up)("Line");return(0,s.wg)(),(0,s.j4)(i,{"chart-options":o.chartOptions,"chart-data":o.chartData,"chart-id":o.chartId,"dataset-id-key":o.datasetIdKey,plugins:o.plugins,"css-classes":o.cssClasses,styles:o.styles,width:o.width,height:o.height},null,8,["chart-options","chart-data","chart-id","dataset-id-key","plugins","css-classes","styles","width","height"])}G.kL.register(G.Dx,G.u,G.De,G.uw,G.f$,G.jn,G.od);var L={name:"LineChart",components:{Line:x.x1},props:{chartId:{type:String,default:"line-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:600},height:{type:Number,default:270},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Object,default:()=>{}},chartData:{type:Object,default:()=>({labels:["A","B"],datasets:[{data:[1,1]}]})},chartOptions:{responsive:!0}}};const N=(0,b.Z)(L,[["render",H]]);var R=N,E={components:{Tab:v,TabMenu:j,DoughnutChart:U,DataWindow:J,LineChart:R},inject:["groupInfo","ageGroups"],data(){return{groupInput:"",error:null}},methods:{displayGroupInfo(){console.log(this.groupInfo)},getAgeGroupLabels(){const t=["Unknown"];let e=-1;for(const o of this.ageGroups.value)t.push(`${e+1}${o>100?"+":`-${o}`}`),e=o;return t},getAgeGroupColors(){const t=[];t.push("#bbb");for(let e=0;e<this.ageGroups.value.length;e++)t.push(p(100+25*e,60,60));return t},getPostsLabels(){const t=[];for(let e=0;e<this.groupInfo.posts.length;e++){const o=this.groupInfo.posts[e].date,n=("0"+o.getDate()).slice(-2),s=("0"+o.getMonth()).slice(-2);t.push(`${n}.${s}.${o.getFullYear()}`)}return t}}};const P=(0,b.Z)(E,[["render",c],["__scopeId","data-v-7b96be2f"]]);var Y=P,z="data:image/png;base64,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";const F=t=>((0,s.dD)("data-v-3edfe088"),t=t(),(0,s.Cn)(),t),q={class:"container"},Z=F((()=>(0,s._)("div",{class:"header-container"},[(0,s._)("h1",null,"Enter group ID:"),(0,s._)("div",{class:"hint"},[(0,s._)("span",null,"?"),(0,s._)("div",{class:"hint-content"},[(0,s._)("img",{src:z,alt:"Short name"})])])],-1))),V=["disabled"],X={class:"loading-info"},$={key:0,class:"long-loading-hint"};function tt(t,e,o,a,r,i){const u=(0,s.up)("pong-loader");return(0,s.wg)(),(0,s.iD)("div",q,[Z,(0,s._)("form",{class:"id-form",onSubmit:e[1]||(e[1]=(0,n.iM)(((...t)=>i.onSubmit&&i.onSubmit(...t)),["prevent"]))},[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.groupInput=t),disabled:this.loading},null,8,V),[[n.nr,r.groupInput]])],32),(0,s._)("div",X,[(0,s.Wm)(u,{class:(0,l.C_)([{hidden:!this.loading},"loader"])},null,8,["class"]),this.longLoading?((0,s.wg)(),(0,s.iD)("span",$,"Groups with high amount of members may take longer to analyze.")):(0,s.kq)("",!0),(0,s._)("span",{class:(0,l.C_)([{hidden:!this.error},"error-text"])},(0,l.zw)(this.error?.error_msg||t.Ошибка),3)])])}var et=o(6265),ot=o.n(et);async function nt(t){return"string"==typeof t&&(t=t.replace(/ /g,"_")),ot().get(`http://localhost:8080//method/groups.getById?group_id=${t}&fields=members_count&access_token=&v=5.131`).catch((t=>console.error(t)))}async function st(t,e){console.log("getting group members");const o=Math.ceil(e/1e3),n=[],s=[];for(let u=0;u<o;u++)s.push(`http://localhost:8080//method/groups.getMembers?group_id=${t}&count=${Math.min(1e3,e-1e3*u)}&offset=${1e3*u}&access_token=&v=5.131`);const a=t=>new Promise((e=>setTimeout(e,t)));for(const u of s)await ot().get(u).then((t=>{t.data.error?console.error(t.data.error):(console.log("BATCH COMPLETED YEAH BABY"),n.push(...t.data.response.items))})).catch((t=>{console.error(t)})),await a(334);const r=[],i=[],l=1e3;for(let u=0;u<o;u++)i.push(`http://localhost:8080//method/users.get?user_ids=${n.slice(u*l,Math.min((u+1)*l,e)).join()}&fields=sex,education,schools,bdate&access_token=&v=5.131`);for(const u of i)await ot().get(u).then((t=>{t.data.error?console.error(t.data.error):(console.log("BATCH COMPLETED YEAH BABY"),r.push(...t.data.response))})).catch((t=>{console.error(t)})),await a(334);return console.log("DONE GETTING MEMBERS"),r}async function at(t){return console.log("getting group posts"),ot().get(`http://localhost:8080//method/wall.get?owner_id=-${t}&count=100&access_token=&v=5.131`).then((t=>t.data.response.items.map((t=>({date:new Date(1e3*t.date),likes:t.likes.count,comments:t.comments.count,reposts:t.reposts.count})))))}function rt(t,e,o,n,a,r){return(0,s.wg)(),(0,s.iD)("div",{class:"pong1",style:(0,l.j5)([a.pongStyle1])},[(0,s._)("div",{class:"pong2",style:(0,l.j5)([a.pongStyle2])},null,4)],4)}var it={name:"PongLoader",props:{width:{type:Number,default:128},height:{type:Number,default:16}},data(){return{pongStyle1:{width:this.width+"px",height:this.height+"px",transform:`translateY(-${this.height}px)`},pongStyle2:{width:this.height-4+"px",height:this.height-4+"px","--widthOffset":this.height+"px"}}}};const lt=(0,b.Z)(it,[["render",rt],["__scopeId","data-v-bb4e40e4"]]);var ut=lt,ct={components:{PongLoader:ut},inject:["groupInfo","ageGroups"],data(){return{loading:!1,longLoading:!1,groupInput:"",error:null}},methods:{onSubmit(){this.groupInput&&""!==this.groupInput&&(this.loading=!0,this.error=null,setTimeout((()=>{this.loading&&(this.longLoading=!0)}),5e3),nt(this.groupInput).then((t=>{const e=t.data.error;if(e)return this.error=e,this.loading=!1,void console.log(e);const o=t.data.response[0];this.groupInfo.name=o.name,this.groupInfo.memberCount=o.members_count,this.groupInfo.photo=o.photo_100,console.log(o);const n=new Promise(((t,e)=>{st(o.id,o.members_count).then((e=>{const o=h(e,this.ageGroups.value);this.groupInfo.memberSex=o.memberSex,this.groupInfo.memberAge=o.memberAge,this.groupInfo.memberEducation=o.memberEducation,t()})).catch((t=>e(t)))})),s=new Promise(((t,e)=>{at(o.id).then((e=>{this.groupInfo.posts=e,t()})).catch((t=>e(t)))}));n.then(s.then((()=>{this.loading=!1,this.longLoading=!1,this.groupInfo.loaded=!0,console.log("all loaded")})))})))}}};const dt=(0,b.Z)(ct,[["render",tt],["__scopeId","data-v-3edfe088"]]);var ht=dt,pt={name:"App",components:{InputPanel:ht,InformationPanel:Y},setup(){const t=(0,i.qj)({loaded:!1,memberSex:[],memberEducation:[],memberAge:[],posts:{}}),e=(0,i.iH)([14,18,21,24,34,44,54,64,1e3]);(0,s.JJ)("groupInfo",t),(0,s.JJ)("ageGroups",e)}};const gt=(0,b.Z)(pt,[["render",r],["__scopeId","data-v-03f25008"]]);var ft=gt;(0,n.ri)(ft).mount("#app")}},e={};function o(n){var s=e[n];if(void 0!==s)return s.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,o),a.exports}o.m=t,function(){var t=[];o.O=function(e,n,s,a){if(!n){var r=1/0;for(c=0;c<t.length;c++){n=t[c][0],s=t[c][1],a=t[c][2];for(var i=!0,l=0;l<n.length;l++)(!1&a||r>=a)&&Object.keys(o.O).every((function(t){return o.O[t](n[l])}))?n.splice(l--,1):(i=!1,a<r&&(r=a));if(i){t.splice(c--,1);var u=s();void 0!==u&&(e=u)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[n,s,a]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,a,r=n[0],i=n[1],l=n[2],u=0;if(r.some((function(e){return 0!==t[e]}))){for(s in i)o.o(i,s)&&(o.m[s]=i[s]);if(l)var c=l(o)}for(e&&e(n);u<r.length;u++)a=r[u],o.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return o.O(c)},n=self["webpackChunkvk_group_analyzer"]=self["webpackChunkvk_group_analyzer"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(2804)}));n=o.O(n)})();
//# sourceMappingURL=app.9c18431e.js.map